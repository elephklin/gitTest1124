{"version":3,"sources":["webpack:///./src/views/ProductList.vue?8e19","webpack:///src/views/ProductList.vue","webpack:///./src/views/ProductList.vue?c83f","webpack:///./src/views/ProductList.vue","webpack:///./node_modules/core-js/modules/es.array.index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","class","active","category","preventDefault","changeCategory","_v","_l","item","index","key","_s","id","style","backgroundImage","title","_f","price","origin_price","addCart","staticRenderFns","data","products","categoryItem","components","methods","getProducts","vm","$http","get","api","then","response","product_id","qty","post","res","success","$bus","$emit","message","computed","filterCategory","forEach","push","filter","ary","indexOf","filterProducts","selectCategory","created","component","$","$indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","target","proto","forced","searchElement","apply","arguments","length","undefined"],"mappings":"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","file":"js/chunk-4ce8aee3.135b4a20.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"container mt-5\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3\"},[_c('ul',{staticClass:\"list-category\"},[_c('li',{class:{ active: _vm.category === 'all' },on:{\"click\":function($event){$event.preventDefault();return _vm.changeCategory('all')}}},[_c('router-link',{staticClass:\"h5\",attrs:{\"to\":\"/productlist/all\"}},[_vm._v(\" 全部商品 \")])],1),_vm._l((_vm.filterCategory),function(item,index){return _c('li',{key:index,class:{ active: _vm.category === item },on:{\"click\":function($event){$event.preventDefault();return _vm.changeCategory(item)}}},[_c('router-link',{staticClass:\"h5\",attrs:{\"to\":(\"/productlist/\" + item)}},[_vm._v(\" \"+_vm._s(item)+\" \")])],1)})],2)]),_c('div',{staticClass:\"col-md-9\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.filterProducts),function(item){return _c('div',{key:item.id,staticClass:\"col-md-6 col-lg-4 mb-4\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-cover\"},[_c('div',{staticClass:\"card-img\",style:({ backgroundImage: (\"url(\" + (item.imageUrl) + \")\") })})]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center\"},[_c('div',{staticClass:\"h4 card-title mb-0\"},[_vm._v(_vm._s(item.title))]),_c('span',{staticClass:\"badge badge-minor\"},[_vm._v(_vm._s(item.category))])]),_c('div',{staticClass:\"d-flex justify-content-between align-items-baseline mt-2\"},[_c('div',{staticClass:\"h5 text-danger\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.price))+\" \")]),_c('del',{staticClass:\"h6 text-secondary\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.origin_price))+\" \")])])]),_c('div',{staticClass:\"card-footer\"},[_c('div',{staticClass:\"d-flex justify-content-between align-items-baseline\"},[_c('router-link',{staticClass:\"btn btn-sm btn-other\",attrs:{\"to\":(\"/product/\" + (item.id))}},[_vm._v(\" 查看更多 \")]),_c('a',{staticClass:\"btn btn-sm btn-other\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addCart(item.id)}}},[_vm._v(\" 購物車 \")])],1)])])])}),0)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <div class=\"container mt-5\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-3\">\r\n          <ul class=\"list-category\">\r\n            <li\r\n              :class=\"{ active: category === 'all' }\"\r\n              @click.prevent=\"changeCategory('all')\"\r\n            >\r\n              <router-link class=\"h5\" :to=\"`/productlist/all`\">\r\n                全部商品\r\n              </router-link>\r\n            </li>\r\n\r\n            <li\r\n              v-for=\"(item, index) in filterCategory\"\r\n              :key=\"index\"\r\n              :class=\"{ active: category === item }\"\r\n              @click.prevent=\"changeCategory(item)\"\r\n            >\r\n              <router-link class=\"h5\" :to=\"`/productlist/${item}`\">\r\n                {{ item }}\r\n              </router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"col-md-9\">\r\n          <div class=\"row\">\r\n            <div\r\n              class=\"col-md-6 col-lg-4 mb-4\"\r\n              v-for=\"item in filterProducts\"\r\n              :key=\"item.id\"\r\n            >\r\n              <div class=\"card\">\r\n                <div class=\"card-cover\">\r\n                  <div\r\n                    :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\r\n                    class=\"card-img\"\r\n                  ></div>\r\n                </div>\r\n                <div class=\"card-body\">\r\n                  <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <div class=\"h4 card-title mb-0\">{{ item.title }}</div>\r\n                    <span class=\"badge badge-minor\">{{ item.category }}</span>\r\n                  </div>\r\n\r\n                  <div class=\"d-flex justify-content-between align-items-baseline mt-2\">\r\n                    <div class=\"h5 text-danger\">\r\n                      {{ item.price | currency }}\r\n                    </div>\r\n                    <del class=\"h6 text-secondary\">\r\n                      {{ item.origin_price | currency }}\r\n                    </del>\r\n                  </div>\r\n                </div>\r\n                <div class=\"card-footer\">\r\n                  <div class=\"d-flex justify-content-between align-items-baseline\">\r\n                    <router-link class=\"btn btn-sm btn-other\" :to=\"`/product/${item.id}`\">\r\n                      查看更多\r\n                    </router-link>\r\n                    <a href=\"#\" class=\"btn btn-sm btn-other\" @click.prevent=\"addCart(item.id)\">\r\n                      購物車\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isLoading: false,\r\n      // 載入讀取效果\r\n      category: \"all\",\r\n      categoryItem: [],\r\n    };\r\n  },\r\n  components: {},\r\n  methods: {\r\n    getProducts() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/products/all`;\r\n      vm.isLoading = true;\r\n      // 注意：使用 get\r\n      vm.$http.get(api).then((response) => {\r\n        vm.products = response.data.products;\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    // 商品種類動態加上 active\r\n    changeCategory(item) {\r\n      const vm = this;\r\n      vm.category = item;\r\n    },\r\n\r\n    // 加入購物車\r\n    addCart(id, qty = 1) {\r\n      const vm = this;\r\n      const cart = {\r\n        product_id: id,\r\n        qty,\r\n      };\r\n      vm.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/cart`;\r\n      vm.$http.post(api, { data: cart }).then((res) => {\r\n        if (res.data.success) {\r\n          vm.$bus.$emit(\"upDateCart\");\r\n          vm.$bus.$emit(\"messsage:push\", res.data.message, \"success\");\r\n        }\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    filterCategory() {\r\n      const vm = this;\r\n      // 抓出所有商品的種類\r\n      vm.products.forEach((item) => {\r\n        vm.categoryItem.push(item.category);\r\n      });\r\n      // 過濾掉重複的商品種類\r\n      return vm.categoryItem.filter((item, index, ary) => {\r\n        return ary.indexOf(item) === index;\r\n      });\r\n    },\r\n\r\n    // 商品種類動態路由 router-link 抓取路由 id 來此過濾商品呈現\r\n    filterProducts() {\r\n      const vm = this;\r\n      let selectCategory = vm.$route.params.category;\r\n\r\n      // Header.vue 動態路由 id 改變 active\r\n      vm.category = selectCategory;\r\n\r\n      if (selectCategory === \"all\") {\r\n        return vm.products;\r\n      } else {\r\n        return vm.products.filter((item) => {\r\n          return item.category === selectCategory;\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    const vm = this;\r\n    vm.getProducts();\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductList.vue?vue&type=template&id=3ad6bcc6&\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}